// Copyright (C) 2024 Roberto Rossini <roberros@uio.no>
//
// SPDX-License-Identifier: MIT

params {
  // IO options
  sample_sheet          = null  // required when 'hic_file' is undefined
  sample                = null  // required when 'sample_sheet' is undefined
  hic_file              = null  // required when 'sample_sheet' is undefined
  resolution            = null  // required when 'sample_sheet' is undefined
  beads                 = null
  periphery_constraints = null
  mask                  = null
  publish_dir_mode      = 'copy'

  // Mask files
  cytoband           = null
  assembly_gaps      = null
  masked_chromosomes = 'chrY,chrM'

  // Chrom3D options
  chrom3d_args     = ''
  ploidy           = 1
  number_of_models = 3
  archive_models   = false

  // NCHG options
  nchg_mad_max          = 5
  nchg_bad_bin_fraction = 0.1

  nchg_fdr_cis          = 0.01
  nchg_log_ratio_cis    = 1.5
  nchg_fdr_trans        = 0.01
  nchg_log_ratio_trans  = 1.5

  // Plotting options
  plot_format                        = 'png'
  nchg_skip_plots                    = false
  nchg_hic_tgt_resolution_plots      = 500000  // Approximate Hi-C data resolution used for plotting
  nchg_plot_sig_interactions_cmap_lb = null    // Lower bound for the color map used to plot significant interactions. Set to nchg_log_ratio when not specified
  nchg_plot_sig_interactions_cmap_ub = 2.0     // Upper bound for the color map used to plot significant interactions

  // Compression level used to compress intermediate files
  zstd_compression_lvl = 8
}

process {
  container = 'ghcr.io/robomics/chrom3d-nf/utils:1.0.0'
}

includeConfig './conf/base.config'
includeConfig './subworkflows/local/samplesheet/nextflow.config'
includeConfig './subworkflows/nchg/nextflow.config'
includeConfig './subworkflows/local/preprocessing/nextflow.config'
includeConfig './subworkflows/local/chrom3d/nextflow.config'
